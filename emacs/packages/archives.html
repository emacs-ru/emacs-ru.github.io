<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Архивы пакетов :: GNU Emacs по-русски</title>
    <link rel="canonical" href="https://emacs-ru.github.io/emacs/packages/archives.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="package.html">
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://emacs-ru.github.io">GNU Emacs по-русски</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="emacs" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">GNU Emacs по-русски</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Добро пожаловать!</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core/index.html">Основы</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/installation.html">Установка</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/keys.html">Клавиши</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/commands.html">Команды</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/modes.html">Режимы</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/store-settings.html">Хранение настроек</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core/customize.html">Customize</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Управление пакетами</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="archives.html">Архивы пакетов</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="package.html">Использование <code>package.el</code></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../glossary.html">Глоссарий</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Пакеты</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="builtin/index.html">Встроенные пакеты</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="builtin/rst.html"><code>rst.el</code></a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="builtin/which-key.html">which-key</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">GNU Emacs по-русски</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">GNU Emacs по-русски</a></div>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">GNU Emacs по-русски</a></li>
    <li><a href="index.html">Управление пакетами</a></li>
    <li><a href="archives.html">Архивы пакетов</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/emacs-ru/content/edit/main/modules/ROOT/pages/packages/archives.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Архивы пакетов</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Архив пакетов&#8201;&#8212;&#8201;это место, в котором хранится список пакетов, которые можно установить в GNU Emacs.</p>
</div>
<div class="paragraph">
<p>Самые известные архивы пакетов:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">GNU</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Этот архив уже давно доступен по умолчанию.
Пакеты в нём очень высокого качества, т. к. проект GNU тщательно следит за этим.
Обновления пакетов в этом репозитории довольно редки, но можно быть уверенным, что ничего не сломается и будет работать именно так, как написано в документации.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Примечание"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Однако, есть и исключения.
Например, пакет <code>guess-language</code> лучше устанавливать из MELPA, так как версия в архиве GNU содержит ошибки.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Страница проекта:</strong> <a href="https://elpa.gnu.org" class="bare">elpa.gnu.org</a></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">NonGNU Elpa</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Пакеты довольно высокого качества, по каким-либо причинам не попавшие в репозиторий GNU<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>.
Сломанные пакеты сюда попадают редко, как правило всё работает именно так, как и ожидается.</p>
</div>
<div class="paragraph">
<p><strong>Страница проекта:</strong> <a href="https://elpa.nongnu.org" class="bare">elpa.nongnu.org</a></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">MELPA</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>На текущий момент самый большой архив пакетов.
Единственная проблема&#8201;&#8212;&#8201;пакеты формируются на основе самой свежей ревизии кода в основной ветке репозитория.
Сломанные, заброшенные и попросту устаревшие пакеты здесь не редкость.
Установленные отсюда пакеты обновляются порой по нескольку раз в день.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Предупреждение"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Используйте пакеты из MELPA с осторожностью.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Страница проекта:</strong> <a href="https://melpa.org" class="bare">melpa.org</a></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">MELPA Stable</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Пусть слово «stable» не вводит вас в заблуждение&#8201;&#8212;&#8201;оно в данном случае означает совсем не то, что вы думаете.
Вот цитата с сайта архива:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Packages in MELPA are built directly from the latest package source code in the upstream repositories, but we also build and publish packages corresponding to the latest tagged code in those repositories, where version tags exist.
These packages are published in a separate package archive called MELPA Stable. Most users should prefer MELPA over MELPA Stable.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Недословный перевод: пакеты в архиве MELPA Stable формируются на основе ревизий кода, отмеченных тегами.
Иногда это означает, что код стабилизирован и протестирован, но не всегда.</p>
</div>
<div class="paragraph">
<p>По своему опыту скажу, что с пакетами из этого архива значительно меньше проблем, чем с пакетами из MELPA.</p>
</div>
<div class="paragraph">
<p><strong>Страница проекта:</strong> <a href="https://stable.melpa.org" class="bare">stable.melpa.org</a></p>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Код настройки архивов</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(require 'package)
(add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/") t)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(add-to-list 'package-archives '("melpa-stable" . "https://stable.melpa.org/packages/") t)
(add-to-list 'package-archives '("nongnu" . "https://elpa.nongnu.org/nongnu/") t)
(package-initialize)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="archives-priorities"><a class="anchor" href="#archives-priorities"></a>Приоритеты архивов</h2>
<div class="sectionbody">
<div class="paragraph">
<p>По умолчанию все архивы в GNU Emacs имеют одинаковый приоритет.
В этом случае предпочтение отдаётся самой новой версии пакета.
Например, пусть пакет доступен в архивах GNU, MELPA Stable и Melpa и имеет следующие версии:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GNU: 1.8.0</p>
</li>
<li>
<p>MELPA Stable: 1.8.1</p>
</li>
<li>
<p>MELPA: 20250921</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>package.el</code> сравнит версии и определит, что самая новая&#8201;&#8212;&#8201;в архиве MELPA.</p>
</div>
<div class="paragraph">
<p>Как было сказано выше, пакеты из этого архива не отличаются стабильностью.
Однако, GNU Emacs позволяет настроить порядок, в котором отдаётся предпочтение архивам, то есть их приоритет.</p>
</div>
<div class="listingblock">
<div class="title">Настройка приоритета архивов</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setopt package-archive-priorities
        '(("gnu" . 40)
          ("nongnu" . 30)
          ("melpa-stable" . 20)
          ("melpa" . 10)))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="archives-contents"><a class="anchor" href="#archives-contents"></a>Обновление локальной копии</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Архивы не будут работать до тех пор, пока GNU Emacs не загрузит файл со списком доступных пакетов на локальный компьютер.
Для этого можно использовать команду <code>packages-refresh-contents</code>, но лучше добавить необходимый код в <code>init.el</code>.</p>
</div>
<div class="listingblock">
<div class="title">Загрузка списка пакетов из архивов</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(unless package-archive-contents
  (progn
    (message "Обновление списка архивов...")
    (package-refresh-contents)))</code></pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Часто&#8201;&#8212;&#8201;несовместимость лицензий, хотя иногда бывает и несоблюдение автором требований GNU.
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Управление пакетами</a></span>
  <span class="next"><a href="package.html">Использование <code>package.el</code></a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=104224581', 'ym');

    ym(104224581, 'init', {ssr:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/104224581" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
